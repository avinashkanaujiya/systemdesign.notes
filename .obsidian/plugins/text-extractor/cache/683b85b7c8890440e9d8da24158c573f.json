{"path":".obsidian/plugins/text-extractor/cache/683b85b7c8890440e9d8da24158c573f.json","text":"M o n g o D B D a t a b a s e C o lle c t io n D o c u m e n t S a m p le D o c u m e n t A d v a n t a g e s A d v a n t a g e s o f M o n g o D B o v e r R D B M S W h y U s e M o n g o D B ? W h e r e to U s e M o n g o D B ? S o m e c o n s id e r a t io n s w h ile d e s ig n in g S c h e m a in M o n g o D B E x a m p le C r e a t e D a t a b a s e T h e u s e C o m m a n d S y n t a x E x a m p le D r o p D a t a b a s e T h e d r o p D a t a b a s e ( ) M e t h o d S y n t a x E x a m p le C r e a t e C o l l e c t i o n T h e c r e a te C o lle c t io n ( ) M e t h o d S y n t a x E x a m p le s M o n g o D B - D r o p C o l l e c t i o n T h e d r o p ( ) M e t h o d S y n t a x E x a m p le M o n g o D B - D a t a t y p e s M o n g o D B - I n s e r t D o c u m e n t T h e in s e r t ( ) M e t h o d S y n t a x E x a m p le E x a m p le M o n g o D B - Q u e r y D o c u m e n t T h e ﬁ n d ( ) M e t h o d S y n t a x T h e p r e tt y ( ) M e t h o d S y n t a x E x a m p le R D B M S W h e r e C la u s e E q u iv a le n t s in M o n g o D B A N D in M o n g o D B S y n t a x E x a m p le O R in M o n g o D B S y n t a x E x a m p le U s in g A N D a n d O R T o g e t h e r E x a m p le M o n g o D B - U p d a t e D o c u m e n t M o n g o D B U p d a te ( ) M e t h o d S y n t a x E x a m p le M o n g o D B S a v e ( ) M e t h o d S y n t a x E x a m p le M o n g o D B - D e l e t e D o c u m e n t T h e r e m o v e ( ) M e t h o d S y n t a x E x a m p le R e m o v e O n ly O n e R e m o v e A ll D o c u m e n t s M o n g o D B - P r o j e c t i o n T h e ﬁ n d ( ) M e t h o d S y n t a x E x a m p le M o n g o D B - L i m i t R e c o r d s T h e L im it ( ) M e t h o d S y n t a x E x a m p le M o n g o D B S k ip ( ) M e t h o d S y n t a x E x a m p le M o n g o D B - S o r t R e c o r d s T h e s o r t ( ) M e t h o d S y n t a x E x a m p le M o n g o D B - I n d e x i n g T h e e n s u r e I n d e x ( ) M e t h o d S y n t a x E x a m p le M o n g o D B - A g g r e g a t i o n T h e a g g r e g a te ( ) M e t h o d S y n t a x E x a m p le P ip e lin e C o n c e p t M o n g o D B - R e p l i c a t i o n W h y R e p lic a t io n ? H o w R e p lic a t io n W o r k s in M o n g o D B R e p lic a S e t F e a t u r e s S e t U p a R e p lic a S e t E x a m p le A d d M e m b e r s to R e p lic a S e t S y n t a x E x a m p le M o n g o D B - S h a r d i n g W h y S h a r d in g ? S h a r d in g in M o n g o D B M o n g o D B - C r e a t e B a c k u p D u m p M o n g o D B D a t a S y n t a x E x a m p le R e s to r e d a t a S y n t a x M o n g o D B - D e p l o y m e n t m o n g o s t a t m o n g o to p R D B M S M o n g o D B D a t a b a s e D a t a b a s e T a b le C o lle c t io n T u p le / R o w D o c u m e n t c o lu m n F ie ld T a b le J o in E m b e d d e d D o c u m e n t s P r im a r y K e y P r im a r y K e y ( D e f a u lt k e y _ id p r o v id e d b y m o n g o d b it s e lf )     M y s q ld / O r a c le m o n g o d m y s q l/ s q lp lu s m o n g o M o n g o D B M o n g o D B is a c r o s s - p la t f o r m , d o c u m e n t o r ie n te d d a t a b a s e t h a t p r o v id e s , h ig h p e r f o r m a n c e , h ig h a v a ila b ilit y, a n d e a s y s c a la b ilit y. M o n g o D B w o r k s o n c o n c e p t o f c o lle c t io n a n d d o c u m e n t . D a t a b a s e D a t a b a s e is a p h y s ic a l c o n t a in e r f o r c o lle c t io n s . Ea c h d a t a b a s e g e t s it s o w n s e t o f ﬁ le s o n t h e ﬁ le s y s te m . A s in g le M o n g o D B s e r v e r t y p ic a lly h a s m u lt ip le d a t a b a s e s . C o l l e c t i o n C o lle c t io n is a g r o u p o f M o n g o D B d o c u m e n t s . I t is t h e e q u iv a le n t o f a n R D B M S t a b le . A c o lle c t io n e x is t s w it h in a s in g le d a t a b a s e . C o lle c t io n s d o n o t e n f o r c e a s c h e m a . D o c u m e n t s w it h in a c o lle c t io n c a n h a v e d iﬀ e r e n t ﬁ e ld s . T y p ic a lly, a ll d o c u m e n t s in a c o lle c t io n a r e o f s im ila r o r r e la te d p u r p o s e . D o c u m e n t A d o c u m e n t is a s e t o f k e y -v a lu e p a ir s . D o c u m e n t s h a v e d y n a m ic s c h e m a . D y n a m ic s c h e m a m e a n s t h a t d o c u m e n t s in t h e s a m e c o lle c t io n d o n o t n e e d to h a v e t h e s a m e s e t o f ﬁ e ld s o r s t r u c t u r e , a n d c o m m o n ﬁ e ld s in a c o lle c t io n 's d o c u m e n t s m a y h o ld d iﬀ e r e n t t y p e s o f d a t a . T h e f o llo w in g t a b le s h o w s t h e r e la t io n s h ip o f R D B M S te r m in o lo g y w it h M o n g o D B . S a m p l e D o c u m e n t F o llo w in g e x a m p le s h o w s t h e d o c u m e n t s t r u c t u r e o f a b lo g s ite , w h ic h is s im p ly a c o m m a s e p a r a te d k e y v a lu e p a ir. {   _ i d : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 c ) 1 2   t i t l e : ' M o n g o D B O v e r v i e w ' ,   d e s c r i p t i o n : ' M o n g o D B i s n o s q l d a t a b a s e ' ,   b y : ' t u t o r i a l s p o i n t ' ,   u r l : ' h t t p : / / w w w . t u t o r i a l s p o i n t . c o m ' ,   t a g s : [ ' m o n g o d b ' , ' d a t a b a s e ' , ' N o S Q L ' ] ,   l i k e s : 1 0 0 ,   c o m m e n t s : [     {         u s e r : ' u s e r 1 ' ,         m e s s a g e : ' M y f i r s t c o m m e n t ' ,         d a t e C r e a t e d : n e w D a t e ( 2 0 1 1 , 1 , 2 0 , 2 , 1 5 ) ,         l i k e : 0     } ,     {         u s e r : ' u s e r 2 ' ,         m e s s a g e : ' M y s e c o n d c o m m e n t s ' ,         d a t e C r e a t e d : n e w D a t e ( 2 0 1 1 , 1 , 2 5 , 7 , 4 5 ) ,         l i k e : 5     }   ] } 3 4 5 6 7 8 9 1 0 1 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 2 0 2 1 2 2 2 3 A d v a n t a g e s A n y r e la t io n a l d a t a b a s e h a s a t y p ic a l s c h e m a d e s ig n t h a t s h o w s n u m b e r o f t a b le s a n d t h e r e la t io n s h ip b e t w e e n t h e s e t a b le s . W h ile in M o n g o D B , t h e r e is n o c o n c e p t o f r e la t io n s h ip . A d v a n t a g e s o f M o n g o D B o v e r R D B M S S c h e m a l e s s − M o n g o D B is a d o c u m e n t d a t a b a s e in w h ic h o n e c o lle c t io n h o ld s d iﬀ e r e n t d o c u m e n t s . N u m b e r o f ﬁ e ld s , c o n te n t a n d s iz e o f t h e d o c u m e n t c a n d iﬀ e r f r o m o n e d o c u m e n t to a n o t h e r. S t r u c t u r e o f a s in g le o b je c t is c le a r. N o c o m p le x jo in s . D e e p q u e r y - a b ilit y. M o n g o D B s u p p o r t s d y n a m ic q u e r ie s o n d o c u m e n t s u s in g a d o c u m e n t- b a s e d q u e r y la n g u a g e t h a t 's n e a r ly a s p o w e r f u l a s S Q L . T u n in g . E a s e o f s c a l e - o u t − M o n g o D B is e a s y to s c a le . C o n v e r s io n / m a p p in g o f a p p lic a t io n o b je c t s to d a t a b a s e o b je c t s n o t n e e d e d . U s e s in te r n a l m e m o r y f o r s to r in g t h e ( w in d o w e d ) w o r k in g s e t , e n a b lin g f a s te r a c c e s s o f d a t a . W h y U s e M o n g o D B ? D o c u m e n t O r i e n t e d S t o r a g e − D a t a is s to r e d in t h e f o r m o f J S O N s t y le d o c u m e n t s . I n d e x o n a n y a tt r ib u te R e p lic a t io n a n d h ig h a v a ila b ilit y A u to - s h a r d in g R ic h q u e r ie s F a s t in - p la c e u p d a te s P r o f e s s io n a l s u p p o r t b y M o n g o D B W h e r e t o U s e M o n g o D B ? B ig D a t a C o n te n t M a n a g e m e n t a n d D e liv e r y M o b ile a n d S o c ia l I n f r a s t r u c t u r e U s e r D a t a M a n a g e m e n t D a t a H u b D a t a in M o n g o D B h a s a ﬂ e x ib le s c h e m a .d o c u m e n t s in t h e s a m e c o lle c t io n . T h e y d o n o t n e e d to h a v e t h e s a m e s e t o f ﬁ e ld s o r s t r u c t u r e , a n d c o m m o n ﬁ e ld s in a c o lle c t io n ’s d o c u m e n t s m a y h o ld d iﬀ e r e n t t y p e s o f d a t a . S o m e c o n s i d e r a t i o n s w h i l e d e s i g n i n g S c h e m a i n M o n g o D B D e s ig n y o u r s c h e m a a c c o r d in g to u s e r r e q u ir e m e n t s . C o m b in e o b je c t s in to o n e d o c u m e n t if y o u w ill u s e t h e m to g e t h e r. O t h e r w is e s e p a r a te t h e m ( b u t m a k e s u r e t h e r e s h o u ld n o t b e n e e d o f jo in s ) . D u p lic a te t h e d a t a ( b u t lim ite d ) b e c a u s e d is k s p a c e is c h e a p a s c o m p a r e to c o m p u te t im e . D o jo in s w h ile w r ite , n o t o n r e a d . O p t im iz e y o u r s c h e m a f o r m o s t f r e q u e n t u s e c a s e s . D o c o m p le x a g g r e g a t io n in t h e s c h e m a . E x a m p l e S u p p o s e a c lie n t n e e d s a d a t a b a s e d e s ig n f o r h is b lo g / w e b s ite a n d s e e t h e d iﬀ e r e n c e s b e t w e e n R D B M S a n d M o n g o D B s c h e m a d e s ig n . W e b s ite h a s t h e f o llo w in g r e q u ir e m e n t s . E v e r y p o s t h a s t h e u n iq u e t it le , d e s c r ip t io n a n d u r l. E v e r y p o s t c a n h a v e o n e o r m o r e t a g s . E v e r y p o s t h a s t h e n a m e o f it s p u b lis h e r a n d to t a l n u m b e r o f lik e s . E v e r y p o s t h a s c o m m e n t s g iv e n b y u s e r s a lo n g w it h t h e ir n a m e , m e s s a g e , d a t a - t im e a n d lik e s . O n e a c h p o s t , t h e r e c a n b e z e r o o r m o r e c o m m e n t s . I n R D B M S s c h e m a , d e s ig n f o r a b o v e r e q u ir e m e n t s w ill h a v e m in im u m t h r e e t a b le s . W h ile in M o n g o D B s c h e m a , d e s ig n w ill h a v e o n e c o lle c t io n p o s t a n d t h e f o llo w in g s t r u c t u r e − S o w h ile s h o w in g t h e d a t a , in R D B M S y o u n e e d to jo in t h r e e t a b le s a n d in M o n g o D B , d a t a w ill b e s h o w n f r o m o n e c o lle c t io n o n ly. {   _ i d : P O S T _ I D   t i t l e : T I T L E _ O F _ P O S T ,   d e s c r i p t i o n : P O S T _ D E S C R I P T I O N ,   b y : P O S T _ B Y ,   u r l : U R L _ O F _ P O S T ,   t a g s : [ T A G 1 , T A G 2 , T A G 3 ] ,   l i k e s : T O T A L _ L I K E S ,   c o m m e n t s : [     {         u s e r : ' C O M M E N T _ B Y ' ,         m e s s a g e : T E X T ,         d a t e C r e a t e d : D A T E _ T I M E ,         l i k e : L I K E S     } ,     {         u s e r : ' C O M M E N T _ B Y ' ,         m e s s a g e : T E X T ,         d a t e C r e a t e d : D A T E _ T I M E ,         l i k e : L I K E S     }   ] } 1 2 3 4 5 6 7 8 9 1 0 1 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 2 0 2 1 2 2 2 3 C r e a t e D a t a b a s e I n t h is c h a p te r, w e w ill s e e h o w to c r e a te a d a t a b a s e in M o n g o D B . T h e u s e C o m m a n d M o n g o D B u s e D A T A B A S E _ N A M E is u s e d to c r e a te d a t a b a s e . T h e c o m m a n d w ill c r e a te a n e w d a t a b a s e if it d o e s n 't e x is t , o t h e r w is e it w ill r e t u r n t h e e x is t in g d a t a b a s e . S y n t a x B a s ic s y n t a x o f u s e D A T A B A S E s t a te m e n t is a s f o llo w s − E x a m p l e I f y o u w a n t to u s e a d a t a b a s e w it h n a m e , t h e n u s e D A T A B A S E s t a te m e n t w o u ld b e a s f o llo w s − T o c h e c k y o u r c u r r e n t ly s e le c te d d a t a b a s e , u s e t h e c o m m a n d d b I f y o u w a n t to c h e c k y o u r d a t a b a s e s lis t , u s e t h e c o m m a n d s h o w d b s . Y o u r c r e a te d d a t a b a s e ( m y d b ) is n o t p r e s e n t in lis t . T o d is p la y d a t a b a s e , y o u n e e d to in s e r t a t le a s t o n e d o c u m e n t in to it . I n M o n g o D B d e f a u lt d a t a b a s e is te s t . I f y o u d id n 't c r e a te a n y d a t a b a s e , t h e n c o lle c t io n s w ill b e s to r e d in te s t d a t a b a s e . u s e D A T A B A S E _ N A M E1 > u s e m y d b s w i t c h e d t o d b m y d b 1 2 > d b m y d b 1 2 > s h o w d b s l o c a l     0 . 7 8 1 2 5 G B t e s t     0 . 2 3 0 1 2 G B 1 2 3 > d b . m o v i e . i n s e r t ( { \" n a m e \" : \" t u t o r i a l s p o i n t \" } ) > s h o w d b s l o c a l     0 . 7 8 1 2 5 G B m y d b       0 . 2 3 0 1 2 G B t e s t       0 . 2 3 0 1 2 G B 1 2 3 4 5 D r o p D a t a b a s e I n t h is c h a p te r, w e w ill s e e h o w to d r o p a d a t a b a s e u s in g M o n g o D B c o m m a n d . T h e d r o p D a t a b a s e ( ) M e t h o d M o n g o D B d b .d r o p D a t a b a s e ( ) c o m m a n d is u s e d to d r o p a e x is t in g d a t a b a s e . S y n t a x B a s ic s y n t a x o f d r o p D a t a b a s e ( ) c o m m a n d is a s f o llo w s − T h is w ill d e le te t h e s e le c te d d a t a b a s e . I f y o u h a v e n o t s e le c te d a n y d a t a b a s e , t h e n it w ill d e le te d e f a u lt 'te s t ' d a t a b a s e . E x a m p l e F ir s t , c h e c k t h e lis t o f a v a ila b le d a t a b a s e s b y u s in g t h e c o m m a n d , s h o w d b s . I f y o u w a n t to d e le te n e w d a t a b a s e , t h e n d r o p D a t a b a s e ( ) c o m m a n d w o u ld b e a s f o llo w s − N o w c h e c k lis t o f d a t a b a s e s . d b . d r o p D a t a b a s e ( )1 > s h o w d b s l o c a l     0 . 7 8 1 2 5 G B m y d b       0 . 2 3 0 1 2 G B t e s t       0 . 2 3 0 1 2 G B > 1 2 3 4 5 > u s e m y d b s w i t c h e d t o d b m y d b > d b . d r o p D a t a b a s e ( ) > { \" d r o p p e d \" : \" m y d b \" , \" o k \" : 1 } > 1 2 3 4 5 > s h o w d b s l o c a l     0 . 7 8 1 2 5 G B t e s t       0 . 2 3 0 1 2 G B > 1 2 3 4 P a r a m e t e r T y p e D e s c r i p t i o n N a m e S t r in g N a m e o f t h e c o lle c t io n to b e c r e a te d O p t io n s D o c u m e n t ( O p t io n a l) S p e c if y o p t io n s a b o u t m e m o r y s iz e a n d in d e x in g F i e l d T y p e D e s c r i p t i o n c a p p e d B o o le a n ( O p t io n a l) I f t r u e , e n a b le s a c a p p e d c o lle c t io n . C a p p e d c o lle c t io n is a ﬁ x e d s iz e c o lle c t io n t h a t a u to m a t ic a lly o v e r w r ite s it s o ld e s t e n t r ie s w h e n it r e a c h e s it s m a x im u m s iz e . I f y o u s p e c i f y t r u e , y o u n e e d t o s p e c i f y s i z e p a r a m e t e r a l s o . a u to I n d e x I d B o o le a n ( O p t io n a l) I f t r u e , a u to m a t ic a lly c r e a te in d e x o n _ id ﬁ e ld .s D e f a u lt v a lu e is f a ls e . s iz e n u m b e r ( O p t io n a l) S p e c iﬁ e s a m a x im u m s iz e in b y te s f o r a c a p p e d c o lle c t io n . I f c a p p e d i s t r u e , t h e n y o u n e e d t o s p e c i f y t h i s ﬁ e l d a l s o . m a x n u m b e r ( O p t io n a l) S p e c iﬁ e s t h e m a x im u m n u m b e r o f d o c u m e n t s a llo w e d in t h e c a p p e d c o lle c t io n . C r e a t e C o l l e c t i o n I n t h is c h a p te r, w e w ill s e e h o w to c r e a te a c o lle c t io n u s in g M o n g o D B . T h e c r e a t e C o l l e c t i o n ( ) M e t h o d M o n g o D B d b .c r e a t e C o l l e c t i o n ( n a m e , o p t i o n s ) is u s e d to c r e a te c o lle c t io n . S y n t a x B a s ic s y n t a x o f c r e a t e C o l l e c t i o n ( ) c o m m a n d is a s f o llo w s − I n t h e c o m m a n d , n a m e is n a m e o f c o lle c t io n to b e c r e a te d . O p t i o n s is a d o c u m e n t a n d is u s e d to s p e c if y c o n ﬁ g u r a t io n o f c o lle c t io n . O p t io n s p a r a m e te r is o p t io n a l, s o y o u n e e d to s p e c if y o n ly t h e n a m e o f t h e c o lle ct io n . F o llo w in g is t h e lis t o f o p t io n s y o u c a n u s e − W h ile in s e r t in g t h e d o c u m e n t , M o n g o D B ﬁ r s t c h e c k s s iz e ﬁ e ld o f c a p p e d c o lle c t io n , t h e n it c h e c k s m a x ﬁ e ld . E x a m p l e s B a s ic s y n t a x o f c r e a t e C o l l e c t i o n ( ) m e t h o d w it h o u t o p t io n s is a s f o llo w s − d b . c r e a t e C o l l e c t i o n ( n a m e , o p t i o n s )1 > u s e t e s t s w i t c h e d t o d b t e s t > d b . c r e a t e C o l l e c t i o n ( \" m y c o l l e c t i o n \" ) { \" o k \" : 1 } > 1 2 3 4 5 Y o u c a n c h e c k t h e c r e a te d c o lle c t io n b y u s in g t h e c o m m a n d s h o w c o l l e c t i o n s . T h e f o llo w in g e x a m p le s h o w s t h e s y n t a x o f c r e a t e C o l l e c t i o n ( ) m e t h o d w it h f e w im p o r t a n t o p t io n s − I n M o n g o D B , y o u d o n 't n e e d to c r e a te c o lle c t io n . M o n g o D B c r e a te s c o lle c t io n a u to m a t ic a lly, w h e n y o u in s e r t s o m e d o c u m e n t . > s h o w c o l l e c t i o n s m y c o l l e c t i o n s y s t e m . i n d e x e s 1 2 3 > d b . c r e a t e C o l l e c t i o n ( \" m y c o l \" , { c a p p e d : t r u e , a u t o I n d e x I d : t r u e , s i z e :   6 1 4 2 8 0 0 , m a x : 1 0 0 0 0 } ) { \" o k \" : 1 } > 1 2 3 4 > d b . t u t o r i a l s p o i n t . i n s e r t ( { \" n a m e \" : \" t u t o r i a l s p o i n t \" } ) > s h o w c o l l e c t i o n s m y c o l m y c o l l e c t i o n s y s t e m . i n d e x e s t u t o r i a l s p o i n t > 1 2 3 4 5 6 7 M o n g o D B - D r o p C o l l e c t i o n I n t h is c h a p te r, w e w ill s e e h o w to d r o p a c o lle c t io n u s in g M o n g o D B . T h e d r o p ( ) M e t h o d M o n g o D B 's d b .c o l l e c t i o n .d r o p ( ) is u s e d to d r o p a c o lle c t io n f r o m t h e d a t a b a s e . S y n t a x B a s ic s y n t a x o f d r o p ( ) c o m m a n d is a s f o llo w s − E x a m p l e F ir s t , c h e c k t h e a v a ila b le c o lle c t io n s in to y o u r d a t a b a s e m y d b . N o w d r o p t h e c o lle c t io n w it h t h e n a m e m y c o l l e c t i o n . A g a in c h e c k t h e lis t o f c o lle c t io n s in to d a t a b a s e . d r o p ( ) m e t h o d w ill r e t u r n t r u e , if t h e s e le c te d c o lle c t io n is d r o p p e d s u c c e s s f u lly, o t h e r w is e it w ill r e t u r n f a ls e . d b . C O L L E C T I O N _ N A M E . d r o p ( )1 > u s e m y d b s w i t c h e d t o d b m y d b > s h o w c o l l e c t i o n s m y c o l m y c o l l e c t i o n s y s t e m . i n d e x e s t u t o r i a l s p o i n t > 1 2 3 4 5 6 7 8 > d b . m y c o l l e c t i o n . d r o p ( ) t r u e > 1 2 3 > s h o w c o l l e c t i o n s m y c o l s y s t e m . i n d e x e s t u t o r i a l s p o i n t > 1 2 3 4 5 M o n g o D B - D a t a t y p e s M o n g o D B s u p p o r t s m a n y d a t a t y p e s . S o m e o f t h e m a r e − S t r i n g − T h is is t h e m o s t c o m m o n ly u s e d d a t a t y p e to s to r e t h e d a t a . S t r in g in M o n g o D B m u s t b e U T F - 8 v a lid . I n t e g e r − T h is t y p e is u s e d to s to r e a n u m e r ic a l v a lu e . I n te g e r c a n b e 3 2 b it o r 6 4 b it d e p e n d in g u p o n y o u r s e r v e r. B o o l e a n − T h is t y p e is u s e d to s to r e a b o o le a n ( t r u e / f a ls e ) v a lu e . D o u b l e − T h is t y p e is u s e d to s to r e ﬂ o a t in g p o in t v a lu e s . M i n / M a x k e y s − T h is t y p e is u s e d to c o m p a r e a v a lu e a g a in s t t h e lo w e s t a n d h ig h e s t B S O N e le m e n t s . A r r a y s − T h is t y p e is u s e d to s to r e a r r a y s o r lis t o r m u lt ip le v a lu e s in to o n e k e y. T i m e s t a m p − c t im e s t a m p . T h is c a n b e h a n d y f o r r e c o r d in g w h e n a d o c u m e n t h a s b e e n m o d iﬁ e d o r a d d e d . O b j e c t − T h is d a t a t y p e is u s e d f o r e m b e d d e d d o c u m e n t s . N u l l − T h is t y p e is u s e d to s to r e a N u ll v a lu e . S y m b o l − T h is d a t a t y p e is u s e d id e n t ic a lly to a s t r in g ; h o w e v e r, it 's g e n e r a lly r e s e r v e d f o r la n g u a g e s t h a t u s e a s p e c iﬁ c s y m b o l t y p e . D a t e − T h is d a t a t y p e is u s e d to s to r e t h e c u r r e n t d a te o r t im e in U N I X t im e f o r m a t . Y o u c a n s p e c if y y o u r o w n d a te t im e b y c r e a t in g o b je c t o f D a te a n d p a s s in g d a y, m o n t h , y e a r in to it . O b j e c t I D − T h is d a t a t y p e is u s e d to s to r e t h e d o c u m e n t ’s I D . B i n a r y d a t a − T h is d a t a t y p e is u s e d to s to r e b in a r y d a t a . C o d e − T h is d a t a t y p e is u s e d to s to r e J a v a S c r ip t c o d e in to t h e d o c u m e n t . R e g u l a r e x p r e s s i o n − T h is d a t a t y p e is u s e d to s to r e r e g u la r e x p r e s s io n . M o n g o D B - I n s e r t D o c u m e n t I n t h is c h a p te r, w e w ill le a r n h o w to in s e r t d o c u m e n t in M o n g o D B c o lle c t io n . T h e i n s e r t ( ) M e t h o d T o in s e r t d a t a in to M o n g o D B c o lle c t io n , y o u n e e d to u s e M o n g o D B 's i n s e r t ( ) o r s a v e ( ) m e t h o d . S y n t a x T h e b a s ic s y n t a x o f i n s e r t ( ) c o m m a n d is a s f o llo w s − E x a m p l e H e r e m y c o l is o u r c o lle c t io n n a m e , a s c r e a te d in t h e p r e v io u s c h a p te r. I f t h e c o lle c t io n d o e s n 't e x is t in t h e d a t a b a s e , t h e n M o n g o D B w ill c r e a te t h is c o lle c t io n a n d t h e n in s e r t a d o c u m e n t in to it . I n t h e in s e r te d d o c u m e n t , if w e d o n 't s p e c if y t h e _ id p a r a m e te r, t h e n M o n g o D B a s s ig n s a u n iq u e O b je c t I d f o r t h is d o c u m e n t . _ id is 1 2 b y te s h e x a d e c im a l n u m b e r u n iq u e f o r e v e r y d o c u m e n t in a c o lle c t io n . 1 2 b y te s a r e d iv id e d a s f o llo w s − T o in s e r t m u lt ip le d o c u m e n t s in a s in g le q u e r y, y o u c a n p a s s a n a r r a y o f d o c u m e n t s in in s e r t ( ) c o m m a n d . E x a m p l e > d b . C O L L E C T I O N _ N A M E . i n s e r t ( d o c u m e n t )1 > d b . m y c o l . i n s e r t ( {   _ i d : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 c ) ,   t i t l e : ' M o n g o D B O v e r v i e w ' ,   d e s c r i p t i o n : ' M o n g o D B i s n o s q l d a t a b a s e ' ,   b y : ' t u t o r i a l s p o i n t ' ,   u r l : ' h t t p : / / w w w . t u t o r i a l s p o i n t . c o m ' ,   t a g s : [ ' m o n g o d b ' , ' d a t a b a s e ' , ' N o S Q L ' ] ,   l i k e s : 1 0 0 } ) 1 2 3 4 5 6 7 8 9 _ i d : O b j e c t I d ( 4 b y t e s t i m e s t a m p , 3 b y t e s m a c h i n e i d , 2 b y t e s p r o c e s s i d ,   3 b y t e s i n c r e m e n t e r ) 1 2 > d b . p o s t . i n s e r t ( [   {     t i t l e : ' M o n g o D B O v e r v i e w ' ,     d e s c r i p t i o n : ' M o n g o D B i s n o s q l d a t a b a s e ' ,     b y : ' t u t o r i a l s p o i n t ' , 1 2 3 4 5 T o in s e r t t h e d o c u m e n t y o u c a n u s e d b .p o s t .s a v e ( d o c u m e n t ) a ls o . I f y o u d o n 't s p e c if y _ i d in t h e d o c u m e n t t h e n s a v e ( ) m e t h o d w ill w o r k s a m e a s i n s e r t ( ) m e t h o d . I f y o u s p e c if y _ id t h e n it w ill r e p la c e w h o le d a t a o f d o c u m e n t c o n t a in in g _ id a s s p e c iﬁ e d in s a v e ( ) m e t h o d .     u r l : ' h t t p : / / w w w . t u t o r i a l s p o i n t . c o m ' ,     t a g s : [ ' m o n g o d b ' , ' d a t a b a s e ' , ' N o S Q L ' ] ,     l i k e s : 1 0 0   } ,   {     t i t l e : ' N o S Q L D a t a b a s e ' ,     d e s c r i p t i o n : \" N o S Q L d a t a b a s e d o e s n ' t h a v e t a b l e s \" ,     b y : ' t u t o r i a l s p o i n t ' ,     u r l : ' h t t p : / / w w w . t u t o r i a l s p o i n t . c o m ' ,     t a g s : [ ' m o n g o d b ' , ' d a t a b a s e ' , ' N o S Q L ' ] ,     l i k e s : 2 0 ,     c o m m e n t s : [         {           u s e r : ' u s e r 1 ' ,           m e s s a g e : ' M y f i r s t c o m m e n t ' ,           d a t e C r e a t e d : n e w D a t e ( 2 0 1 3 , 1 1 , 1 0 , 2 , 3 5 ) ,           l i k e : 0         }     ]   } ] ) 6 7 8 9 1 0 1 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 2 0 2 1 2 2 2 3 2 4 2 5 2 6 2 7 M o n g o D B - Q u e r y D o c u m e n t I n t h is c h a p te r, w e w ill le a r n h o w to q u e r y d o c u m e n t f r o m M o n g o D B c o lle c t io n . T h e ﬁ n d ( ) M e t h o d T o q u e r y d a t a f r o m M o n g o D B c o lle c t io n , y o u n e e d to u s e M o n g o D B 's ﬁ n d ( ) m e t h o d . S y n t a x T h e b a s ic s y n t a x o f ﬁ n d ( ) m e t h o d is a s f o llo w s − ﬁ n d ( ) m e t h o d w ill d is p la y a ll t h e d o c u m e n t s in a n o n - s t r u c t u r e d w a y. T h e p r e t t y ( ) M e t h o d T o d is p la y t h e r e s u lt s in a f o r m a tte d w a y, y o u c a n u s e p r e t t y ( ) m e t h o d . S y n t a x E x a m p l e A p a r t f r o m ﬁ n d ( ) m e t h o d , t h e r e is ﬁ n d O n e ( ) m e t h o d , t h a t r e t u r n s o n ly o n e d o c u m e n t . R D B M S W h e r e C l a u s e E q u i v a l e n t s i n M o n g o D B > d b . C O L L E C T I O N _ N A M E . f i n d ( )1 > d b . m y c o l . f i n d ( ) . p r e t t y ( )1 > d b . m y c o l . f i n d ( ) . p r e t t y ( ) {   \" _ i d \" : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 c ) ,   \" t i t l e \" : \" M o n g o D B O v e r v i e w \" ,   \" d e s c r i p t i o n \" : \" M o n g o D B i s n o s q l d a t a b a s e \" ,   \" b y \" : \" t u t o r i a l s p o i n t \" ,   \" u r l \" : \" h t t p : / / w w w . t u t o r i a l s p o i n t . c o m \" ,   \" t a g s \" : [ \" m o n g o d b \" , \" d a t a b a s e \" , \" N o S Q L \" ] ,   \" l i k e s \" : \" 1 0 0 \" } > 1 2 3 4 5 6 7 8 9 1 0 1 1 O p e r a t i o n S y n t a x E x a m p l e R D B M S E q u i v a l e n t E q u a lit y { :} d b .m y c o l.ﬁ n d ( { \" b y \" :\" t u to r ia ls p o in t \" } ) .p r e tt y ( ) w h e r e b y = 't u to r ia ls p o in t ' L e s s T h a n { :{ $ lt :} } d b .m y c o l.ﬁ n d ( { \" lik e s \" :{ $ lt :5 0 } } ) .p r e tt y ( ) w h e r e lik e s < 5 0 L e s s T h a n E q u a ls { :{ $ lte :} } d b .m y c o l.ﬁ n d ( { \" lik e s \" :{ $ lte :5 0 } } ) .p r e tt y ( ) w h e r e lik e s < = 5 0 G r e a te r T h a n { :{ $ g t :} } d b .m y c o l.ﬁ n d ( { \" lik e s \" :{ $ g t :5 0 } } ) .p r e tt y ( ) w h e r e lik e s > 5 0 G r e a te r T h a n E q u a ls { :{ $ g te :} } d b .m y c o l.ﬁ n d ( { \" lik e s \" :{ $ g te :5 0 } } ) .p r e tt y ( ) w h e r e lik e s > = 5 0 N o t E q u a ls { :{ $ n e :} } d b .m y c o l.ﬁ n d ( { \" lik e s \" :{ $ n e :5 0 } } ) .p r e tt y ( ) w h e r e lik e s != 5 0 T o q u e r y t h e d o c u m e n t o n t h e b a s is o f s o m e c o n d it io n , y o u c a n u s e f o llo w in g o p e r a t io n s . A N D i n M o n g o D B S y n t a x I n t h e ﬁ n d ( ) m e t h o d , if y o u p a s s m u lt ip le k e y s b y s e p a r a t in g t h e m b y ',' t h e n M o n g o D B t r e a t s it a s A N D c o n d it io n . F o llo w in g is t h e b a s ic s y n t a x o f A N D − E x a m p l e F o llo w in g e x a m p le w ill s h o w a ll t h e t u to r ia ls w r itte n b y 't u to r ia ls p o in t ' a n d w h o s e t it le is 'M o n g o D B O v e r v ie w '. F o r t h e a b o v e g iv e n e x a m p le , e q u iv a le n t w h e r e c la u s e w ill b e ' w h e r e b y = 't u t o r i a l s p o i n t ' A N D t i t l e = 'M o n g o D B O v e r v i e w ' '. Y o u c a n p a s s a n y n u m b e r o f k e y, v a lu e p a ir s in ﬁ n d c la u s e . O R i n M o n g o D B S y n t a x T o q u e r y d o c u m e n t s b a s e d o n t h e O R c o n d it io n , y o u n e e d to u s e $ o r k e y w o r d . F o llo w in g is t h e b a s ic s y n t a x o f O R − > d b . m y c o l . f i n d (   {     $ a n d : [         { k e y 1 : v a l u e 1 } , { k e y 2 : v a l u e 2 }     ]   } ) . p r e t t y ( ) 1 2 3 4 5 6 7 > d b . m y c o l . f i n d ( { $ a n d : [ { \" b y \" : \" t u t o r i a l s p o i n t \" } , { \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } ] } ) . p r e t t y ( ) {   \" _ i d \" : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 c ) ,   \" t i t l e \" : \" M o n g o D B O v e r v i e w \" ,   \" d e s c r i p t i o n \" : \" M o n g o D B i s n o s q l d a t a b a s e \" ,   \" b y \" : \" t u t o r i a l s p o i n t \" ,   \" u r l \" : \" h t t p : / / w w w . t u t o r i a l s p o i n t . c o m \" ,   \" t a g s \" : [ \" m o n g o d b \" , \" d a t a b a s e \" , \" N o S Q L \" ] ,   \" l i k e s \" : \" 1 0 0 \" } 1 2 3 4 5 6 7 8 9 E x a m p l e F o llo w in g e x a m p le w ill s h o w a ll t h e t u to r ia ls w r itte n b y 't u to r ia ls p o in t ' o r w h o s e t it le is 'M o n g o D B O v e r v ie w '. U s i n g A N D a n d O R T o g e t h e r E x a m p l e T h e f o llo w in g e x a m p le w ill s h o w t h e d o c u m e n t s t h a t h a v e lik e s g r e a te r t h a n 1 0 a n d w h o s e t it le is e it h e r 'M o n g o D B O v e r v ie w ' o r b y is 't u to r ia ls p o in t '. E q u iv a le n t S Q L w h e r e c la u s e is 'w h e r e l i k e s > 1 0 A N D ( b y = 't u t o r i a l s p o i n t ' O R t i t l e = 'M o n g o D B O v e r v i e w ') ' > d b . m y c o l . f i n d (   {     $ o r : [         { k e y 1 : v a l u e 1 } , { k e y 2 : v a l u e 2 }     ]   } ) . p r e t t y ( ) 1 2 3 4 5 6 7 > d b . m y c o l . f i n d ( { $ o r : [ { \" b y \" : \" t u t o r i a l s p o i n t \" } , { \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } ] } ) . p r e t t y ( ) {   \" _ i d \" : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 c ) ,   \" t i t l e \" : \" M o n g o D B O v e r v i e w \" ,   \" d e s c r i p t i o n \" : \" M o n g o D B i s n o s q l d a t a b a s e \" ,   \" b y \" : \" t u t o r i a l s p o i n t \" ,   \" u r l \" : \" h t t p : / / w w w . t u t o r i a l s p o i n t . c o m \" ,   \" t a g s \" : [ \" m o n g o d b \" , \" d a t a b a s e \" , \" N o S Q L \" ] ,   \" l i k e s \" : \" 1 0 0 \" } > 1 2 3 4 5 6 7 8 9 1 0 1 1 > d b . m y c o l . f i n d ( { \" l i k e s \" : { $ g t : 1 0 } , $ o r : [ { \" b y \" : \" t u t o r i a l s p o i n t \" } ,   { \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } ] } ) . p r e t t y ( ) {   \" _ i d \" : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 c ) ,   \" t i t l e \" : \" M o n g o D B O v e r v i e w \" ,   \" d e s c r i p t i o n \" : \" M o n g o D B i s n o s q l d a t a b a s e \" ,   \" b y \" : \" t u t o r i a l s p o i n t \" ,   \" u r l \" : \" h t t p : / / w w w . t u t o r i a l s p o i n t . c o m \" ,   \" t a g s \" : [ \" m o n g o d b \" , \" d a t a b a s e \" , \" N o S Q L \" ] ,   \" l i k e s \" : \" 1 0 0 \" } > 1 2 3 4 5 6 7 8 9 1 0 1 1 1 2 M o n g o D B - U p d a t e D o c u m e n t M o n g o D B 's u p d a t e ( ) a n d s a v e ( ) m e t h o d s a r e u s e d to u p d a te d o c u m e n t in to a c o lle c t io n . T h e u p d a te ( ) m e t h o d u p d a te s t h e v a lu e s in t h e e x is t in g d o c u m e n t w h ile t h e s a v e ( ) m e t h o d r e p la c e s t h e e x is t in g d o c u m e n t w it h t h e d o c u m e n t p a s s e d in s a v e ( ) m e t h o d . M o n g o D B U p d a t e ( ) M e t h o d T h e u p d a te ( ) m e t h o d u p d a te s t h e v a lu e s in t h e e x is t in g d o c u m e n t . S y n t a x T h e b a s ic s y n t a x o f u p d a t e ( ) m e t h o d is a s f o llo w s − E x a m p l e C o n s id e r t h e m y c o l c o lle c t io n h a s t h e f o llo w in g d a t a . F o llo w in g e x a m p le w ill s e t t h e n e w t it le 'N e w M o n g o D B T u to r ia l' o f t h e d o c u m e n t s w h o s e t it le is 'M o n g o D B O v e r v ie w '. B y d e f a u lt , M o n g o D B w ill u p d a te o n ly a s in g le d o c u m e n t . T o u p d a te m u lt ip le d o c u m e n t s , y o u n e e d to s e t a p a r a m e te r 'm u lt i' to t r u e . M o n g o D B S a v e ( ) M e t h o d T h e s a v e ( ) m e t h o d r e p la c e s t h e e x is t in g d o c u m e n t w it h t h e n e w d o c u m e n t p a s s e d in t h e s a v e ( ) m e t h o d . S y n t a x > d b . C O L L E C T I O N _ N A M E . u p d a t e ( S E L E C T I O N _ C R I T E R I A , U P D A T E D _ D A T A )1 { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } 1 2 3 > d b . m y c o l . u p d a t e ( { ' t i t l e ' : ' M o n g o D B O v e r v i e w ' } , { $ s e t : { ' t i t l e ' : ' N e w M o n g o D B T u t o r i a l ' } } ) > d b . m y c o l . f i n d ( ) { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" N e w M o n g o D B T u t o r i a l \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } > 1 2 3 4 5 6 > d b . m y c o l . u p d a t e ( { ' t i t l e ' : ' M o n g o D B O v e r v i e w ' } ,   { $ s e t : { ' t i t l e ' : ' N e w M o n g o D B T u t o r i a l ' } } , { m u l t i : t r u e } ) 1 2 T h e b a s ic s y n t a x o f M o n g o D B s a v e ( ) m e t h o d is s h o w n b e lo w − E x a m p l e F o llo w in g e x a m p le w ill r e p la c e t h e d o c u m e n t w it h t h e _ id '5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 '. > d b . C O L L E C T I O N _ N A M E . s a v e ( { _ i d : O b j e c t I d ( ) , N E W _ D A T A } )1 > d b . m y c o l . s a v e (   {     \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t N e w T o p i c \" ,     \" b y \" : \" T u t o r i a l s P o i n t \"   } ) > d b . m y c o l . f i n d ( ) { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t N e w T o p i c \" ,   \" b y \" : \" T u t o r i a l s P o i n t \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } > 1 2 3 4 5 6 7 8 9 1 0 1 1 1 2 M o n g o D B - D e l e t e D o c u m e n t I n t h is c h a p te r, w e w ill le a r n h o w to d e le te a d o c u m e n t u s in g M o n g o D B . T h e r e m o v e ( ) M e t h o d M o n g o D B 's r e m o v e ( ) m e t h o d is u s e d to r e m o v e a d o c u m e n t f r o m t h e c o lle c t io n . r e m o v e ( ) m e t h o d a c c e p t s t w o p a r a m e te r s . O n e is d e le t io n c r ite r ia a n d s e c o n d is ju s t O n e ﬂ a g . d e l e t i o n c r i t e r i a − ( O p t io n a l) d e le t io n c r ite r ia a c c o r d in g to d o c u m e n t s w ill b e r e m o v e d . j u s t O n e − ( O p t io n a l) if s e t to t r u e o r 1 , t h e n r e m o v e o n ly o n e d o c u m e n t . S y n t a x B a s ic s y n t a x o f r e m o v e ( ) m e t h o d is a s f o llo w s − E x a m p l e C o n s id e r t h e m y c o l c o lle c t io n h a s t h e f o llo w in g d a t a . F o llo w in g e x a m p le w ill r e m o v e a ll t h e d o c u m e n t s w h o s e t it le is 'M o n g o D B O v e r v ie w '. R e m o v e O n l y O n e I f t h e r e a r e m u lt ip le r e c o r d s a n d y o u w a n t to d e le te o n ly t h e ﬁ r s t r e c o r d , t h e n s e t j u s t O n e p a r a m e te r in r e m o v e ( ) m e t h o d . R e m o v e A l l D o c u m e n t s > d b . C O L L E C T I O N _ N A M E . r e m o v e ( D E L L E T I O N _ C R I T T E R I A )1 { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } 1 2 3 > d b . m y c o l . r e m o v e ( { ' t i t l e ' : ' M o n g o D B O v e r v i e w ' } ) > d b . m y c o l . f i n d ( ) { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } > 1 2 3 4 5 > d b . C O L L E C T I O N _ N A M E . r e m o v e ( D E L E T I O N _ C R I T E R I A , 1 )1 I f y o u d o n 't s p e c if y d e le t io n c r ite r ia , t h e n M o n g o D B w ill d e le te w h o le d o c u m e n t s f r o m t h e c o lle c t io n . T h i s i s e q u i v a l e n t o f S Q L 's t r u n c a t e c o m m a n d . > d b . m y c o l . r e m o v e ( ) > d b . m y c o l . f i n d ( ) > 1 2 3 M o n g o D B - P r o j e c t i o n I n M o n g o D B , p r o je c t io n m e a n s s e le c t in g o n ly t h e n e c e s s a r y d a t a r a t h e r t h a n s e le c t in g w h o le o f t h e d a t a o f a d o c u m e n t . I f a d o c u m e n t h a s 5 ﬁ e ld s a n d y o u n e e d to s h o w o n ly 3 , t h e n s e le c t o n ly 3 ﬁ e ld s f r o m t h e m . T h e ﬁ n d ( ) M e t h o d M o n g o D B 's ﬁ n d ( ) m e t h o d , e x p la in e d in M o n g o D B Q u e r y D o c u m e n t a c c e p t s s e c o n d o p t io n a l p a r a m e te r t h a t is lis t o f ﬁ e ld s t h a t y o u w a n t to r e t r ie v e . I n M o n g o D B , w h e n y o u e x e c u te ﬁ n d ( ) m e t h o d , t h e n it d is p la y s a ll ﬁ e ld s o f a d o c u m e n t . T o lim it t h is , y o u n e e d to s e t a lis t o f ﬁ e ld s w it h v a lu e 1 o r 0 . 1 is u s e d to s h o w t h e ﬁ e ld w h ile 0 is u s e d to h id e t h e ﬁ e ld s . S y n t a x T h e b a s ic s y n t a x o f ﬁ n d ( ) m e t h o d w it h p r o je c t io n is a s f o llo w s − E x a m p l e C o n s id e r t h e c o lle c t io n m y c o l h a s t h e f o llo w in g d a t a − F o llo w in g e x a m p le w ill d is p la y t h e t it le o f t h e d o c u m e n t w h ile q u e r y in g t h e d o c u m e n t . P le a s e n o te _ i d ﬁ e ld is a lw a y s d is p la y e d w h ile e x e c u t in g ﬁ n d ( ) m e t h o d , if y o u d o n 't w a n t t h is ﬁ e ld , t h e n y o u n e e d to s e t it a s 0 . > d b . C O L L E C T I O N _ N A M E . f i n d ( { } , { K E Y : 1 } )1 { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } 1 2 3 > d b . m y c o l . f i n d ( { } , { \" t i t l e \" : 1 , _ i d : 0 } ) { \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } { \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } > 1 2 3 4 5 M o n g o D B - L i m i t R e c o r d s I n t h is c h a p te r, w e w ill le a r n h o w to lim it r e c o r d s u s in g M o n g o D B . T h e L i m i t ( ) M e t h o d T o lim it t h e r e c o r d s in M o n g o D B , y o u n e e d to u s e l i m i t ( ) m e t h o d . T h e m e t h o d a c c e p t s o n e n u m b e r t y p e a r g u m e n t , w h ic h is t h e n u m b e r o f d o c u m e n t s t h a t y o u w a n t to b e d is p la y e d . S y n t a x T h e b a s ic s y n t a x o f l i m i t ( ) m e t h o d is a s f o llo w s − E x a m p l e C o n s id e r t h e c o lle c t io n m y y c o l h a s t h e f o llo w in g d a t a . F o llo w in g e x a m p le w ill d is p la y o n ly t w o d o c u m e n t s w h ile q u e r y in g t h e d o c u m e n t . I f y o u d o n 't s p e c if y t h e n u m b e r a r g u m e n t in l i m i t ( ) m e t h o d t h e n it w ill d is p la y a ll d o c u m e n t s f r o m t h e c o lle c t io n . M o n g o D B S k i p ( ) M e t h o d A p a r t f r o m lim it ( ) m e t h o d , t h e r e is o n e m o r e m e t h o d s k i p ( ) w h ic h a ls o a c c e p t s n u m b e r t y p e a r g u m e n t a n d is u s e d to s k ip t h e n u m b e r o f d o c u m e n t s . S y n t a x T h e b a s ic s y n t a x o f s k i p ( ) m e t h o d is a s f o llo w s − E x a m p l e > d b . C O L L E C T I O N _ N A M E . f i n d ( ) . l i m i t ( N U M B E R )1 { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } 1 2 3 > d b . m y c o l . f i n d ( { } , { \" t i t l e \" : 1 , _ i d : 0 } ) . l i m i t ( 2 ) { \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } { \" t i t l e \" : \" N o S Q L O v e r v i e w \" } > 1 2 3 4 > d b . C O L L E C T I O N _ N A M E . f i n d ( ) . l i m i t ( N U M B E R ) . s k i p ( N U M B E R )1 F o llo w in g e x a m p le w ill d is p la y o n ly t h e s e c o n d d o c u m e n t . P le a s e n o te , t h e d e f a u lt v a lu e in s k i p ( ) m e t h o d is 0 . > d b . m y c o l . f i n d ( { } , { \" t i t l e \" : 1 , _ i d : 0 } ) . l i m i t ( 1 ) . s k i p ( 1 ) { \" t i t l e \" : \" N o S Q L O v e r v i e w \" } > 1 2 3 M o n g o D B - S o r t R e c o r d s I n t h is c h a p te r, w e w ill le a r n h o w to s o r t r e c o r d s in M o n g o D B . T h e s o r t ( ) M e t h o d T o s o r t d o c u m e n t s in M o n g o D B , y o u n e e d to u s e s o r t ( ) m e t h o d . T h e m e t h o d a c c e p t s a d o c u m e n t c o n t a in in g a lis t o f ﬁ e ld s a lo n g w it h t h e ir s o r t in g o r d e r. T o s p e c if y s o r t in g o r d e r 1 a n d - 1 a r e u s e d . 1 is u s e d f o r a s c e n d in g o r d e r w h ile - 1 is u s e d f o r d e s c e n d in g o r d e r. S y n t a x T h e b a s ic s y n t a x o f s o r t ( ) m e t h o d is a s f o llo w s − E x a m p l e C o n s id e r t h e c o lle c t io n m y y c o l h a s t h e f o llo w in g d a t a . F o llo w in g e x a m p le w ill d is p la y t h e d o c u m e n t s s o r te d b y t it le in t h e d e s c e n d in g o r d e r. P le a s e n o te , if y o u d o n 't s p e c if y t h e s o r t in g p r e f e r e n c e , t h e n s o r t ( ) m e t h o d w ill d is p la y t h e d o c u m e n t s in a s c e n d in g o r d e r. > d b . C O L L E C T I O N _ N A M E . f i n d ( ) . s o r t ( { K E Y : 1 } )1 { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 5 ) , \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 6 ) , \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" _ i d \" : O b j e c t I d ( 5 9 8 3 5 4 8 7 8 1 3 3 1 a d f 4 5 e c 7 ) , \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } 1 2 3 > d b . m y c o l . f i n d ( { } , { \" t i t l e \" : 1 , _ i d : 0 } ) . s o r t ( { \" t i t l e \" : - 1 } ) { \" t i t l e \" : \" T u t o r i a l s P o i n t O v e r v i e w \" } { \" t i t l e \" : \" N o S Q L O v e r v i e w \" } { \" t i t l e \" : \" M o n g o D B O v e r v i e w \" } > 1 2 3 4 5 P a r a m e t e r T y p e D e s c r i p t i o n b a c k g r o u n d B o o le a n B u ild s t h e in d e x in t h e b a c k g r o u n d s o t h a t b u ild in g a n in d e x d o e s n o t b lo c k o t h e r d a t a b a s e a c t iv it ie s . S p e c if y t r u e to b u ild in t h e b a c k g r o u n d . T h e d e f a u lt v a lu e is f a l s e . u n iq u e B o o le a n C r e a te s a u n iq u e in d e x s o t h a t t h e c o lle c t io n w ill n o t a c c e p t in s e r t io n o f d o c u m e n t s w h e r e t h e in d e x k e y o r k e y s m a tc h a n e x is t in g v a lu e in t h e in d e x . S p e c if y t r u e to c r e a te a u n iq u e in d e x . T h e d e f a u lt v a lu e is f a l s e . n a m e s t r in g T h e n a m e o f t h e in d e x . I f u n s p e c iﬁ e d , M o n g o D B g e n e r a te s a n in d e x n a m e b y c o n c a te n a t in g t h e n a m e s o f t h e in d e x e d ﬁ e ld s a n d t h e s o r t o r d e r. M o n g o D B - I n d e x i n g I n d e x e s s u p p o r t t h e e ﬃ c ie n t r e s o lu t io n o f q u e r ie s . W it h o u t in d e x e s , M o n g o D B m u s t s c a n e v e r y d o c u m e n t o f a c o lle c t io n to s e le c t t h o s e d o c u m e n t s t h a t m a tc h t h e q u e r y s t a te m e n t . T h is s c a n is h ig h ly in e ﬃ c ie n t a n d r e q u ir e M o n g o D B to p r o c e s s a la r g e v o lu m e o f d a t a . I n d e x e s a r e s p e c ia l d a t a s t r u c t u r e s , t h a t s to r e a s m a ll p o r t io n o f t h e d a t a s e t in a n e a s y - to - t r a v e r s e f o r m . T h e in d e x s to r e s t h e v a lu e o f a s p e c iﬁ c ﬁ e ld o r s e t o f ﬁ e ld s , o r d e r e d b y t h e v a lu e o f t h e ﬁ e ld a s s p e c iﬁ e d in t h e in d e x . T h e e n s u r e I n d e x ( ) M e t h o d T o c r e a te a n in d e x y o u n e e d to u s e e n s u r e I n d e x ( ) m e t h o d o f M o n g o D B . S y n t a x T h e b a s ic s y n t a x o f e n s u r e I n d e x ( ) m e t h o d is a s f o llo w s ( ) . H e r e k e y is t h e n a m e o f t h e ﬁ e ld o n w h ic h y o u w a n t to c r e a te in d e x a n d 1 is f o r a s c e n d in g o r d e r. T o c r e a te in d e x in d e s c e n d in g o r d e r y o u n e e d to u s e - 1 . E x a m p l e I n e n s u r e I n d e x ( ) m e t h o d y o u c a n p a s s m u lt ip le ﬁ e ld s , to c r e a te in d e x o n m u lt ip le ﬁ e ld s . e n s u r e I n d e x ( ) m e t h o d a ls o a c c e p t s lis t o f o p t io n s ( w h ic h a r e o p t io n a l) . F o llo w in g is t h e lis t − > d b . C O L L E C T I O N _ N A M E . e n s u r e I n d e x ( { K E Y : 1 } )1 > d b . m y c o l . e n s u r e I n d e x ( { \" t i t l e \" : 1 } ) > 1 2 > d b . m y c o l . e n s u r e I n d e x ( { \" t i t l e \" : 1 , \" d e s c r i p t i o n \" : - 1 } ) > 1 2 P a r a m e t e r T y p e D e s c r i p t i o n d r o p D u p s B o o le a n C r e a te s a u n iq u e in d e x o n a ﬁ e ld t h a t m a y h a v e d u p lic a te s . M o n g o D B in d e x e s o n ly t h e ﬁ r s t o c c u r r e n c e o f a k e y a n d r e m o v e s a ll d o c u m e n t s f r o m t h e c o lle c t io n t h a t c o n t a in s u b s e q u e n t o c c u r r e n c e s o f t h a t k e y. S p e c if y t r u e to c r e a te u n iq u e in d e x . T h e d e f a u lt v a lu e is f a l s e . s p a r s e B o o le a n I f t r u e , t h e in d e x o n ly r e f e r e n c e s d o c u m e n t s w it h t h e s p e c iﬁ e d ﬁ e ld . T h e s e in d e x e s u s e le s s s p a c e b u t b e h a v e d iﬀ e r e n t ly in s o m e s it u a t io n s ( p a r t ic u la r ly s o r t s ) . T h e d e f a u lt v a lu e is f a l s e . e x p ir e A f te r S e c o n d s in te g e r S p e c iﬁ e s a v a lu e , in s e c o n d s , a s a T T L to c o n t r o l h o w lo n g M o n g o D B r e t a in s d o c u m e n t s in t h is c o lle c t io n . v in d e x v e r s io n T h e in d e x v e r s io n n u m b e r. T h e d e f a u lt in d e x v e r s io n d e p e n d s o n t h e v e r s io n o f M o n g o D B r u n n in g w h e n c r e a t in g t h e in d e x . w e ig h t s d o c u m e n t T h e w e ig h t is a n u m b e r r a n g in g f r o m 1 to 9 9 ,9 9 9 a n d d e n o te s t h e s ig n iﬁ c a n c e o f t h e ﬁ e ld r e la t iv e to t h e o t h e r in d e x e d ﬁ e ld s in te r m s o f t h e s c o r e . d e f a u lt _ la n g u a g e s t r in g F o r a te x t in d e x , t h e la n g u a g e t h a t d e te r m in e s t h e lis t o f s to p w o r d s a n d t h e r u le s f o r t h e s te m m e r a n d to k e n iz e r. T h e d e f a u lt v a lu e is e n g l i s h . la n g u a g e _ o v e r r id e s t r in g F o r a te x t in d e x , s p e c if y t h e n a m e o f t h e ﬁ e ld in t h e d o c u m e n t t h a t c o n t a in s , t h e la n g u a g e to o v e r r id e t h e d e f a u lt la n g u a g e . T h e d e f a u lt v a lu e is la n g u a g e . M o n g o D B - A g g r e g a t i o n A g g r e g a t io n s o p e r a t io n s p r o c e s s d a t a r e c o r d s a n d r e t u r n c o m p u te d r e s u lt s . A g g r e g a t io n o p e r a t io n s g r o u p v a lu e s f r o m m u lt ip le d o c u m e n t s to g e t h e r, a n d c a n p e r f o r m a v a r ie t y o f o p e r a t io n s o n t h e g r o u p e d d a t a to r e t u r n a s in g le r e s u lt . I n S Q L c o u n t ( * ) a n d w it h g r o u p b y is a n e q u iv a le n t o f m o n g o d b a g g r e g a t io n . T h e a g g r e g a t e ( ) M e t h o d F o r t h e a g g r e g a t io n in M o n g o D B , y o u s h o u ld u s e a g g r e g a t e ( ) m e t h o d . S y n t a x B a s ic s y n t a x o f a g g r e g a t e ( ) m e t h o d is a s f o llo w s − E x a m p l e I n t h e c o lle c t io n y o u h a v e t h e f o llo w in g d a t a − > d b . C O L L E C T I O N _ N A M E . a g g r e g a t e ( A G G R E G A T E _ O P E R A T I O N )1 {   _ i d : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 c )   t i t l e : ' M o n g o D B O v e r v i e w ' ,   d e s c r i p t i o n : ' M o n g o D B i s n o s q l d a t a b a s e ' ,   b y _ u s e r : ' t u t o r i a l s p o i n t ' ,   u r l : ' h t t p : / / w w w . t u t o r i a l s p o i n t . c o m ' ,   t a g s : [ ' m o n g o d b ' , ' d a t a b a s e ' , ' N o S Q L ' ] ,   l i k e s : 1 0 0 } , {   _ i d : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 d )   t i t l e : ' N o S Q L O v e r v i e w ' ,   d e s c r i p t i o n : ' N o s q l d a t a b a s e i s v e r y f a s t ' ,   b y _ u s e r : ' t u t o r i a l s p o i n t ' ,   u r l : ' h t t p : / / w w w . t u t o r i a l s p o i n t . c o m ' ,   t a g s : [ ' m o n g o d b ' , ' d a t a b a s e ' , ' N o S Q L ' ] ,   l i k e s : 1 0 } , {   _ i d : O b j e c t I d ( 7 d f 7 8 a d 8 9 0 2 e )   t i t l e : ' N e o 4 j O v e r v i e w ' ,   d e s c r i p t i o n : ' N e o 4 j i s n o s q l d a t a b a s e ' ,   b y _ u s e r : ' N e o 4 j ' ,   u r l : ' h t t p : / / w w w . n e o 4 j . c o m ' ,   t a g s : [ ' n e o 4 j ' , ' d a t a b a s e ' , ' N o S Q L ' ] ,   l i k e s : 7 5 0 1 2 3 4 5 6 7 8 9 1 0 1 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 2 0 2 1 2 2 2 3 2 4 2 5 2 6 E x p r e s s i o n D e s c r i p t i o n E x a m p l e $ s u m S u m s u p t h e d e ﬁ n e d v a lu e f r o m a ll d o c u m e n t s in t h e c o lle c t io n . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , n u m _ t u to r ia l : { $ s u m : \" $ lik e s \" } } } ] ) $ a v g C a lc u la te s t h e a v e r a g e o f a ll g iv e n v a lu e s f r o m a ll d o c u m e n t s in t h e c o lle c t io n . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , n u m _ t u to r ia l : { $ a v g : \" $ lik e s \" } } } ] ) $ m in G e t s t h e m in im u m o f t h e c o r r e s p o n d in g v a lu e s f r o m a ll d o c u m e n t s in t h e c o lle c t io n . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , n u m _ t u to r ia l : { $ m in : \" $ lik e s \" } } } ] ) $ m a x G e t s t h e m a x im u m o f t h e c o r r e s p o n d in g v a lu e s f r o m a ll d o c u m e n t s in t h e c o lle c t io n . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , n u m _ t u to r ia l : { $ m a x : \" $ lik e s \" } } } ] ) $ p u s h I n s e r t s t h e v a lu e to a n a r r a y in t h e r e s u lt in g d o c u m e n t . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , u r l : { $ p u s h : \" $ u r l\" } } } ] ) $ a d d T o S e t I n s e r t s t h e v a lu e to a n a r r a y in t h e r e s u lt in g d o c u m e n t b u t d o e s n o t c r e a te d u p lic a te s . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , u r l : { $ a d d T o S e t : \" $ u r l\" } } } ] ) $ ﬁ r s t G e t s t h e ﬁ r s t d o c u m e n t f r o m t h e s o u r c e d o c u m e n t s a c c o r d in g to t h e g r o u p in g . T y p ic a lly t h is m a k e s o n ly s e n s e to g e t h e r w it h s o m e p r e v io u s ly a p p lie d “ $ s o r t ” - s t a g e . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , ﬁ r s t _ u r l : { $ ﬁ r s t : \" $ u r l\" } } } ] ) $ la s t G e t s t h e la s t d o c u m e n t f r o m t h e s o u r c e d o c u m e n t s a c c o r d in g to t h e g r o u p in g . T y p ic a lly t h is m a k e s o n ly s e n s e to g e t h e r w it h s o m e p r e v io u s ly a p p lie d “ $ s o r t ” - s t a g e . d b .m y c o l.a g g r e g a te ( [ { $ g r o u p : { _ id : \" $ b y _ u s e r \" , la s t _ u r l : { $ la s t : \" $ u r l\" } } } ] ) N o w f r o m t h e a b o v e c o lle c t io n , if y o u w a n t to d is p la y a lis t s t a t in g h o w m a n y t u to r ia ls a r e w r itte n b y e a c h u s e r, t h e n y o u w ill u s e t h e f o llo w in g a g g r e g a t e ( ) m e t h o d − S q l e q u iv a le n t q u e r y f o r t h e a b o v e u s e c a s e w ill b e s e l e c t b y _ u s e r, c o u n t ( * ) f r o m m y c o l g r o u p b y b y _ u s e r . I n t h e a b o v e e x a m p le , w e h a v e g r o u p e d d o c u m e n t s b y ﬁ e ld b y _ u s e r a n d o n e a c h o c c u r r e n c e o f b y _ u s e r p r e v io u s v a lu e o f s u m is in c r e m e n te d . F o llo w in g is a lis t o f a v a ila b le a g g r e g a t io n e x p r e s s io n s . } ,2 7 > d b . m y c o l . a g g r e g a t e ( [ { $ g r o u p : { _ i d : \" $ b y _ u s e r \" , n u m _ t u t o r i a l : { $ s u m : 1 } } } ] ) {   \" r e s u l t \" : [     {         \" _ i d \" : \" t u t o r i a l s p o i n t \" ,         \" n u m _ t u t o r i a l \" : 2     } ,     {         \" _ i d \" : \" N e o 4 j \" ,         \" n u m _ t u t o r i a l \" : 1     }   ] ,   \" o k \" : 1 } > 1 2 3 4 5 6 7 8 9 1 0 1 1 1 2 1 3 1 4 1 5 P i p e l i n e C o n c e p t I n U N I X c o m m a n d , s h e ll p ip e lin e m e a n s t h e p o s s ib ilit y to e x e c u te a n o p e r a t io n o n s o m e in p u t a n d u s e t h e o u t p u t a s t h e in p u t f o r t h e n e x t c o m m a n d a n d s o o n . M o n g o D B a ls o s u p p o r t s s a m e c o n c e p t in a g g r e g a t io n f r a m e w o r k . T h e r e is a s e t o f p o s s ib le s t a g e s a n d e a c h o f t h o s e is t a k e n a s a s e t o f d o c u m e n t s a s a n in p u t a n d p r o d u c e s a r e s u lt in g s e t o f d o c u m e n t s ( o r t h e ﬁ n a l r e s u lt in g J S O N d o c u m e n t a t t h e e n d o f t h e p ip e lin e ) . T h is c a n t h e n in t u r n b e u s e d f o r t h e n e x t s t a g e a n d s o o n . F o llo w in g a r e t h e p o s s ib le s t a g e s in a g g r e g a t io n f r a m e w o r k − $ p r o j e c t − U s e d to s e le c t s o m e s p e c iﬁ c ﬁ e ld s f r o m a c o lle c t io n . $ m a t c h − T h is is a ﬁ lte r in g o p e r a t io n a n d t h u s t h is c a n r e d u c e t h e a m o u n t o f d o c u m e n t s t h a t a r e g iv e n a s in p u t to t h e n e x t s t a g e . $ g r o u p − T h is d o e s t h e a c t u a l a g g r e g a t io n a s d is c u s s e d a b o v e . $ s o r t − S o r t s t h e d o c u m e n t s . $ s k i p − W it h t h is , it is p o s s ib le to s k ip f o r w a r d in t h e lis t o f d o c u m e n t s f o r a g iv e n a m o u n t o f d o c u m e n t s . $ l i m i t − T h is lim it s t h e a m o u n t o f d o c u m e n t s to lo o k a t , b y t h e g iv e n n u m b e r s t a r t in g f r o m t h e c u r r e n t p o s it io n s . $ u n w i n d − T h is is u s e d to u n w in d d o c u m e n t t h a t a r e u s in g a r r a y s . W h e n u s in g a n a r r a y, t h e d a t a is k in d o f p r e - jo in e d a n d t h is o p e r a t io n w ill b e u n d o n e w it h t h is to h a v e in d iv id u a l d o c u m e n t s a g a in . T h u s w it h t h is s t a g e w e w ill in c r e a s e t h e a m o u n t o f d o c u m e n t s f o r t h e n e x t s t a g e . M o n g o D B - R e p l i c a t i o n R e p lic a t io n is t h e p r o c e s s o f s y n c h r o n iz in g d a t a a c r o s s m u lt ip le s e r v e r s . R e p lic a t io n p r o v id e s r e d u n d a n c y a n d in c r e a s e s d a t a a v a ila b ilit y w it h m u lt ip le c o p ie s o f d a t a o n d iﬀ e r e n t d a t a b a s e s e r v e r s . R e p lic a t io n p r o te c t s a d a t a b a s e f r o m t h e lo s s o f a s in g le s e r v e r. R e p lic a t io n a ls o a llo w s y o u to r e c o v e r f r o m h a r d w a r e f a ilu r e a n d s e r v ic e in te r r u p t io n s . W it h a d d it io n a l c o p ie s o f t h e d a t a , y o u c a n d e d ic a te o n e to d is a s te r r e c o v e r y, r e p o r t in g , o r b a c k u p . W h y R e p l i c a t i o n ? T o k e e p y o u r d a t a s a f e H ig h ( 2 4 * 7 ) a v a ila b ilit y o f d a t a D is a s te r r e c o v e r y N o d o w n t im e f o r m a in te n a n c e ( lik e b a c k u p s , in d e x r e b u ild s , c o m p a c t io n ) R e a d s c a lin g ( e x t r a c o p ie s to r e a d f r o m ) R e p lic a s e t is t r a n s p a r e n t to t h e a p p lic a t io n H o w R e p l i c a t i o n W o r k s i n M o n g o D B M o n g o D B a c h ie v e s r e p lic a t io n b y t h e u s e o f r e p lic a s e t . A r e p lic a s e t is a g r o u p o f m o n g o d in s t a n c e s t h a t h o s t t h e s a m e d a t a s e t . I n a r e p lic a , o n e n o d e is p r im a r y n o d e t h a t r e c e iv e s a ll w r ite o p e r a t io n s . A ll o t h e r in s t a n c e s , s u c h a s s e c o n d a r ie s , a p p ly o p e r a t io n s f r o m t h e p r im a r y s o t h a t t h e y h a v e t h e s a m e d a t a s e t . R e p lic a s e t c a n h a v e o n ly o n e p r im a r y n o d e . R e p lic a s e t is a g r o u p o f t w o o r m o r e n o d e s ( g e n e r a lly m in im u m 3 n o d e s a r e r e q u ir e d ) . I n a r e p lic a s e t , o n e n o d e is p r im a r y n o d e a n d r e m a in in g n o d e s a r e s e c o n d a r y. A ll d a t a r e p lic a te s f r o m p r im a r y to s e c o n d a r y n o d e . A t t h e t im e o f a u to m a t ic f a ilo v e r o r m a in te n a n c e , e le c t io n e s t a b lis h e s f o r p r im a r y a n d a n e w p r im a r y n o d e is e le c te d . A f te r t h e r e c o v e r y o f f a ile d n o d e , it a g a in jo in t h e r e p lic a s e t a n d w o r k s a s a s e c o n d a r y n o d e . A ty p ic a l d ia g r a m o f M o n g o D B r e p lic a t io n is s h o w n in w h ic h c lie n t a p p lic a t io n a lw a y s in te r a c t w it h t h e p r im a r y n o d e a n d t h e p r im a r y n o d e t h e n r e p lic a te s t h e d a t a to t h e s e c o n d a r y n o d e s .   R e p l i c a S e t F e a t u r e s A c lu s te r o f N n o d e s A n y o n e n o d e c a n b e p r im a r y A ll w r ite o p e r a t io n s g o to p r im a r y A u to m a t ic f a ilo v e r A u to m a t ic r e c o v e r y C o n s e n s u s e le c t io n o f p r im a r y S e t U p a R e p l i c a S e t I n t h is t u to r ia l, w e w ill c o n v e r t s t a n d a lo n e M o n g o D B in s t a n c e to a r e p lic a s e t . T o c o n v e r t to r e p lic a s e t , f o llo w in g a r e t h e s te p s − S h u td o w n a lr e a d y r u n n in g M o n g o D B s e r v e r. S t a r t t h e M o n g o D B s e r v e r b y s p e c if y in g - - r e p lS e t o p t io n . F o llo w in g is t h e b a s ic s y n t a x o f - - r e p lS e t − E x a m p l e I t w ill s t a r t a m o n g o d in s t a n c e w it h t h e n a m e r s 0 , o n p o r t 2 7 0 1 7 . N o w s t a r t t h e c o m m a n d p r o m p t a n d c o n n e c t to t h is m o n g o d in s t a n c e . I n M o n g o c lie n t , is s u e t h e c o m m a n d r s .i n i t i a t e ( ) to in it ia te a n e w r e p lic a s e t . T o c h e c k t h e r e p lic a s e t c o n ﬁ g u r a t io n , is s u e t h e c o m m a n d r s .c o n f ( ) . T o c h e c k t h e s t a t u s o f r e p lic a s e t is s u e t h e c o m m a n d r s .s t a t u s ( ) . A d d M e m b e r s t o R e p l i c a S e t T o a d d m e m b e r s to r e p lic a s e t , s t a r t m o n g o d in s t a n c e s o n m u lt ip le m a c h in e s . N o w s t a r t a m o n g o c lie n t a n d is s u e a c o m m a n d r s .a d d ( ) . S y n t a x T h e b a s ic s y n t a x o f r s .a d d ( ) c o m m a n d is a s f o llo w s − E x a m p l e S u p p o s e y o u r m o n g o d in s t a n c e n a m e is m o n g o d 1 .n e t a n d it is r u n n in g o n p o r t 2 7 0 1 7 . T o a d d t h is in s t a n c e to r e p lic a s e t , is s u e t h e c o m m a n d r s .a d d ( ) in M o n g o c lie n t . Y o u c a n a d d m o n g o d in s t a n c e to r e p lic a s e t o n ly w h e n y o u a r e c o n n e c te d to p r im a r y n o d e . T o c h e c k w h e t h e r y o u a r e c o n n e c te d to p r im a r y o r n o t , is s u e t h e c o m m a n d d b .i s M a s t e r ( ) in m o n g o c lie n t . m o n g o d - - p o r t \" P O R T \" - - d b p a t h \" Y O U R _ D B _ D A T A _ P A T H \" - - r e p l S e t \" R E P L I C A _ S E T _ I N S T A N C E _ N A M E \"1 m o n g o d - - p o r t 2 7 0 1 7 - - d b p a t h \" D : \\ s e t u p \\ m o n g o d b \\ d a t a \" - - r e p l S e t r s 01 > r s . a d d ( H O S T _ N A M E : P O R T )1 > r s . a d d ( \" m o n g o d 1 . n e t : 2 7 0 1 7 \" ) > 1 2 M o n g o D B - S h a r d i n g S h a r d in g is t h e p r o c e s s o f s to r in g d a t a r e c o r d s a c r o s s m u lt ip le m a c h in e s a n d it is M o n g o D B 's a p p r o a c h to m e e t in g t h e d e m a n d s o f d a t a g r o w t h . A s t h e s iz e o f t h e d a t a in c r e a s e s , a s in g le m a c h in e m a y n o t b e s u ﬃ c ie n t to s to r e t h e d a t a n o r p r o v id e a n a c c e p t a b le r e a d a n d w r ite t h r o u g h p u t . S h a r d in g s o lv e s t h e p r o b le m w it h h o r iz o n t a l s c a lin g . W it h s h a r d in g , y o u a d d m o r e m a c h in e s to s u p p o r t d a t a g r o w t h a n d t h e d e m a n d s o f r e a d a n d w r ite o p e r a t io n s . W h y S h a r d i n g ? I n r e p lic a t io n , a ll w r ite s g o to m a s te r n o d e L a te n c y s e n s it iv e q u e r ie s s t ill g o to m a s te r S in g le r e p lic a s e t h a s lim it a t io n o f 1 2 n o d e s M e m o r y c a n 't b e la r g e e n o u g h w h e n a c t iv e d a t a s e t is b ig L o c a l d is k is n o t b ig e n o u g h V e r t ic a l s c a lin g is to o e x p e n s iv e S h a r d i n g i n M o n g o D B T h e f o llo w in g d ia g r a m s h o w s t h e s h a r d in g in M o n g o D B u s in g s h a r d e d c lu s te r.   I n t h e f o llo w in g d ia g r a m , t h e r e a r e t h r e e m a in c o m p o n e n t s − S h a r d s − S h a r d s a r e u s e d to s to r e d a t a . T h e y p r o v id e h ig h a v a ila b ilit y a n d d a t a c o n s is te n c y. I n p r o d u c t io n e n v ir o n m e n t , e a c h s h a r d is a s e p a r a te r e p lic a s e t . C o n ﬁ g S e r v e r s − C o n ﬁ g s e r v e r s s to r e t h e c lu s te r 's m e t a d a t a . T h is d a t a c o n t a in s a m a p p in g o f t h e c lu s te r 's d a t a s e t to t h e s h a r d s . T h e q u e r y r o u te r u s e s t h is m e t a d a t a to t a r g e t o p e r a t io n s to s p e c iﬁ c s h a r d s . I n p r o d u c t io n e n v ir o n m e n t , s h a r d e d c lu s te r s h a v e e x a c t ly 3 c o n ﬁ g s e r v e r s . Q u e r y R o u t e r s − Q u e r y r o u te r s a r e b a s ic a lly m o n g o in s t a n c e s , in te r f a c e w it h c lie n t a p p lic a t io n s a n d d ir e c t o p e r a t io n s to t h e a p p r o p r ia te s h a r d . T h e q u e r y r o u te r p r o c e s s e s a n d t a r g e t s t h e o p e r a t io n s to s h a r d s a n d t h e n r e t u r n s r e s u lt s to t h e c lie n t s . A s h a r d e d c lu s te r c a n c o n t a in m o r e t h a n o n e q u e r y r o u te r to d iv id e t h e c lie n t r e q u e s t lo a d . A c lie n t s e n d s r e q u e s t s to o n e q u e r y r o u te r. G e n e r a lly, a s h a r d e d c lu s te r h a v e m a n y q u e r y r o u te r s . S y n t a x D e s c r i p t i o n E x a m p l e m o n g o d u m p - - h o s t H O S T _ N A M E - - p o r t P O R T _ N U M B ER T h is c o m m m a n d w ill b a c k u p a ll d a t a b a s e s o f s p e c iﬁ e d m o n g o d in s t a n c e . m o n g o d u m p - - h o s t t u to r ia ls p o in t .c o m - - p o r t 2 7 0 1 7 m o n g o d u m p - - d b p a t h D B _ PA T H - - o u t B A C K U P _ D I R E C T O R Y T h is c o m m a n d w ill b a c k u p o n ly s p e c iﬁ e d d a t a b a s e a t s p e c iﬁ e d p a t h . m o n g o d u m p - - d b p a t h / d a t a / d b / - - o u t / d a t a / b a c k u p / m o n g o d u m p - - c o lle c t io n C O L L E C T I O N - - d b D B _ N A M E T h is c o m m a n d w ill b a c k u p o n ly s p e c iﬁ e d c o lle c t io n o f s p e c iﬁ e d d a t a b a s e . m o n g o d u m p - - c o lle c t io n m y c o l - - d b te s t M o n g o D B - C r e a t e B a c k u p I n t h is c h a p te r, w e w ill s e e h o w to c r e a te a b a c k u p in M o n g o D B . D u m p M o n g o D B D a t a T o c r e a te b a c k u p o f d a t a b a s e in M o n g o D B , y o u s h o u ld u s e m o n g o d u m p c o m m a n d . T h is c o m m a n d w ill d u m p t h e e n t ir e d a t a o f y o u r s e r v e r in to t h e d u m p d ir e c to r y. T h e r e a r e m a n y o p t io n s a v a ila b le b y w h ic h y o u c a n lim it t h e a m o u n t o f d a t a o r c r e a te b a c k u p o f y o u r r e m o te s e r v e r. S y n t a x T h e b a s ic s y n t a x o f m o n g o d u m p c o m m a n d is a s f o llo w s − E x a m p l e S t a r t y o u r m o n g o d s e r v e r. A s s u m in g t h a t y o u r m o n g o d s e r v e r is r u n n in g o n t h e lo c a lh o s t a n d p o r t 2 7 0 1 7 , o p e n a c o m m a n d p r o m p t a n d g o to t h e b in d ir e c to r y o f y o u r m o n g o d b in s t a n c e a n d t y p e t h e c o m m a n d m o n g o d u m p C o n s id e r t h e m y c o l c o lle c t io n h a s t h e f o llo w in g d a t a . T h e c o m m a n d w ill c o n n e c t to t h e s e r v e r r u n n in g a t 1 2 7 .0 .0 .1 a n d p o r t 2 7 0 1 7 a n d b a c k a ll d a t a o f t h e s e r v e r to d ir e c to r y / b i n / d u m p / . F o llo w in g is t h e o u t p u t o f t h e c o m m a n d −   F o llo w in g is a lis t o f a v a ila b le o p t io n s t h a t c a n b e u s e d w it h t h e m o n g o d u m p c o m m a n d . R e s t o r e d a t a T o r e s to r e b a c k u p d a t a M o n g o D B 's m o n g o r e s t o r e c o m m a n d is u s e d . T h is c o m m a n d r e s to r e s a ll o f t h e d a t a f r o m t h e b a c k u p d ir e c to r y. > m o n g o d u m p1 > m o n g o d u m p1 S y n t a x T h e b a s ic s y n t a x o f m o n g o r e s t o r e c o m m a n d is − F o llo w in g is t h e o u t p u t o f t h e c o m m a n d − > m o n g o r e s t o r e1 M o n g o D B - D e p l o y m e n t W h e n y o u a r e p r e p a r in g a M o n g o D B d e p lo y m e n t , y o u s h o u ld t r y to u n d e r s t a n d h o w y o u r a p p lic a t io n is g o in g to h o ld u p in p r o d u c t io n . I t ’s a g o o d id e a to d e v e lo p a c o n s is te n t , r e p e a t a b le a p p r o a c h to m a n a g in g y o u r d e p lo y m e n t e n v ir o n m e n t s o t h a t y o u c a n m in im iz e a n y s u r p r is e s o n c e y o u ’r e in p r o d u c t io n . T h e b e s t a p p r o a c h in c o r p o r a te s p r o to t y p in g y o u r s e t u p , c o n d u c t in g lo a d te s t in g , m o n ito r in g k e y m e t r ic s , a n d u s in g t h a t in f o r m a t io n to s c a le y o u r s e t u p . T h e k e y p a r t o f t h e a p p r o a c h is to p r o a c t iv e ly m o n ito r y o u r e n t ir e s y s te m - t h is w ill h e lp y o u u n d e r s t a n d h o w y o u r p r o d u c t io n s y s te m w ill h o ld u p b e f o r e d e p lo y in g , a n d d e te r m in e w h e r e y o u w ill n e e d to a d d c a p a c it y. H a v in g in s ig h t in to p o te n t ia l s p ik e s in y o u r m e m o r y u s a g e , f o r e x a m p le , c o u ld h e lp p u t o u t a w r ite - lo c k ﬁ r e b e f o r e it s t a r t s . T o m o n ito r y o u r d e p lo y m e n t , M o n g o D B p r o v id e s s o m e o f t h e f o llo w in g c o m m a n d s − m o n g o s t a t T h is c o m m a n d c h e c k s t h e s t a t u s o f a ll r u n n in g m o n g o d in s t a n c e s a n d r e t u r n c o u n te r s o f d a t a b a s e o p e r a t io n s . T h e s e c o u n te r s in clu d e in s e r t s , q u e r ie s , u p d a te s , d e le te s , a n d c u r s o r s . C o m m a n d a ls o s h o w s w h e n y o u ’r e h itt in g p a g e f a u lt s , a n d s h o w c a s e y o u r lo c k p e r c e n t a g e . T h is m e a n s t h a t y o u 'r e r u n n in g lo w o n m e m o r y, h itt in g w r ite c a p a c it y o r h a v e s o m e p e r f o r m a n c e is s u e . T o r u n t h e c o m m a n d , s t a r t y o u r m o n g o d in s t a n c e . I n a n o t h e r c o m m a n d p r o m p t , g o to b i n d ir e c to r y o f y o u r m o n g o d b in s t a lla t io n a n d t y p e m o n g o s t a t . F o llo w in g is t h e o u t p u t o f t h e c o m m a n d −   m o n g o t o p T h is c o m m a n d t r a c k s a n d r e p o r t s t h e r e a d a n d w r ite a c t iv it y o f M o n g o D B in s t a n c e o n a c o lle c t io n b a s is . B y d e f a u lt , m o n g o t o p r e t u r n s in f o r m a t io n in e a c h s e c o n d , w h ic h y o u c a n c h a n g e it a c c o r d in g ly. Y o u s h o u ld c h e c k t h a t t h is r e a d a n d w r ite a c t iv it y m a tc h e s y o u r a p p lic a t io n in te n t io n , a n d y o u ’r e n o t ﬁ r in g to o m a n y w r ite s to t h e d a t a b a s e a t a t im e , r e a d in g to o f r e q u e n t ly f r o m a d is k , o r a r e e x c e e d in g y o u r w o r k in g s e t s iz e . T o r u n t h e c o m m a n d , s t a r t y o u r m o n g o d in s t a n c e . I n a n o t h e r c o m m a n d p r o m p t , g o to b i n d ir e c to r y o f y o u r m o n g o d b in s t a lla t io n a n d t y p e m o n g o t o p . F o llo w in g is t h e o u t p u t o f t h e c o m m a n d −   T o c h a n g e m o n g o t o p c o m m a n d to r e t u r n in f o r m a t io n le s s f r e q u e n t ly, s p e c if y a s p e c iﬁ c n u m b e r a f te r t h e m o n g o to p c o m m a n d . D : \\ s e t u p \\ m o n g o d b \\ b i n > m o n g o s t a t1 D : \\ s e t u p \\ m o n g o d b \\ b i n > m o n g o t o p1 T h e a b o v e e x a m p le w ill r e t u r n v a lu e s e v e r y 3 0 s e c o n d s . A p a r t f r o m t h e M o n g o D B to o ls , 1 0 g e n p r o v id e s a f r e e , h o s te d m o n ito r in g s e r v ic e , M o n g o D B M a n a g e m e n t S e r v ic e ( M M S ) , t h a t p r o v id e s a d a s h b o a r d a n d g iv e s y o u a v ie w o f t h e m e t r ic s f r o m y o u r e n t ir e c lu s te r.   D : \\ s e t u p \\ m o n g o d b \\ b i n > m o n g o t o p 3 01","libVersion":"0.2.2","langs":""}